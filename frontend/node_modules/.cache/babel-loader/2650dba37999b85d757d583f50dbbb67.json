{"ast":null,"code":"import React,{useEffect}from'react';import{useDispatch,useSelector}from'react-redux';import{Link}from'react-router-dom';import Message from'./../../components/Message/Message';import{addToCart,removeFromCart}from'./../../actions/cartActions';import{Row,Col,ListGroup,Image,Button,Form,Container,Card}from'react-bootstrap';import Meta from'../../components/Helmet/Meta';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Cart=_ref=>{let{match,location,history}=_ref;const productId=match.params.id;const qty=location.search?Number(location.search.split('=')[1]):1;const dispatch=useDispatch();const cartSeed=useSelector(state=>state.cartSeed);const{cartItems}=cartSeed;useEffect(()=>{if(productId){dispatch(addToCart(productId,qty));}},[dispatch,productId,qty]);const removeFromCartHandler=id=>{dispatch(removeFromCart(id));};const checkoutHandler=()=>{history.push('/login?redirect=shipping');};return/*#__PURE__*/_jsxs(Container,{style:{marginTop:'100px',marginBottom:'50px'},children:[/*#__PURE__*/_jsx(Meta,{title:\"Agroic | Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsxs(Col,{md:8,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),cartItems.length===0?/*#__PURE__*/_jsxs(Message,{variant:\"danger\",children:[\"Your cart is empty \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"GO BACK\"})]}):/*#__PURE__*/_jsx(ListGroup,{variant:\"flush\",children:cartItems.map(item=>/*#__PURE__*/_jsx(ListGroup.Item,{style:{marginTop:'10px'},children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})}),/*#__PURE__*/_jsx(Col,{md:3,children:/*#__PURE__*/_jsx(Link,{to:\"/farmers/purchaseSeeds/\".concat(item.seed),children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:2,children:[\"RS.\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Form.Control,{as:\"select\",value:item.qty,onChange:e=>dispatch(addToCart(item.seed,Number(e.target.value))),children:[...Array(item.countInStock).keys()].map(x=>/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1))})}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"light\",onClick:()=>removeFromCartHandler(item.seed),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item.seed))})]}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{style:{marginTop:'50px'},children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsxs(ListGroup.Item,{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Subtotal (\",cartItems.reduce((acc,item)=>acc+item.qty,0),\") items\"]}),\"RS.\",cartItems.reduce((acc,item)=>acc+item.qty*item.price,0).toFixed(2)]}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"btn-block\",disabled:cartItems.length===0,onClick:checkoutHandler,children:\"Proceed To Checkout\"})})]})})})]})]});};export default Cart;","map":{"version":3,"names":["React","useEffect","useDispatch","useSelector","Link","Message","addToCart","removeFromCart","Row","Col","ListGroup","Image","Button","Form","Container","Card","Meta","jsx","_jsx","jsxs","_jsxs","Cart","_ref","match","location","history","productId","params","id","qty","search","Number","split","dispatch","cartSeed","state","cartItems","removeFromCartHandler","checkoutHandler","push","style","marginTop","marginBottom","children","title","md","length","variant","to","map","item","Item","src","image","alt","name","fluid","rounded","concat","seed","price","Control","as","value","onChange","e","target","Array","countInStock","keys","x","type","onClick","className","reduce","acc","toFixed","disabled"],"sources":["C:/Users/PC/web-cw/frontend/src/screens/Cart/Cart.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link } from 'react-router-dom'\r\nimport Message from './../../components/Message/Message';\r\nimport { addToCart, removeFromCart } from './../../actions/cartActions'\r\nimport { Row, Col, ListGroup, Image, Button, Form, Container, Card } from 'react-bootstrap';\r\nimport Meta from '../../components/Helmet/Meta';\r\n\r\nconst Cart = ({ match, location, history }) => {\r\n\r\n    const productId = match.params.id\r\n    const qty = location.search ? Number(location.search.split('=')[1]) : 1\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const cartSeed = useSelector((state) => state.cartSeed)\r\n    const { cartItems } = cartSeed\r\n\r\n    useEffect(() => {\r\n        if (productId) {\r\n            dispatch(addToCart(productId, qty))\r\n        }\r\n    }, [dispatch, productId, qty])\r\n\r\n    const removeFromCartHandler = (id) => {\r\n        dispatch(removeFromCart(id))\r\n    }\r\n\r\n    const checkoutHandler = () => {\r\n        history.push('/login?redirect=shipping')\r\n    }\r\n\r\n    return (\r\n        <Container style={{ marginTop: '100px', marginBottom: '50px' }}>\r\n            <Meta\r\n                title=\"Agroic | Cart\"\r\n            />\r\n            <Row>\r\n                <Col md={8}>\r\n                    <h1>Shopping Cart</h1>\r\n                    {\r\n                        cartItems.length === 0 ? (\r\n                            <Message variant='danger'>\r\n                                Your cart is empty <Link to='/'>GO BACK</Link>\r\n                            </Message>\r\n                        ) : (\r\n                                <ListGroup variant='flush' >\r\n                                    {cartItems.map((item) => (\r\n                                        <ListGroup.Item key={item.seed} style={{ marginTop: '10px' }}>\r\n                                            <Row>\r\n                                                <Col md={2}>\r\n                                                    <Image src={item.image} alt={item.name} fluid rounded />\r\n                                                </Col>\r\n                                                <Col md={3}>\r\n                                                    <Link to={`/farmers/purchaseSeeds/${item.seed}`}>{item.name}</Link>\r\n                                                </Col>\r\n                                                <Col md={2}>RS.{item.price}</Col>\r\n                                                <Col md={2}>\r\n                                                    <Form.Control\r\n                                                        as='select'\r\n                                                        value={item.qty}\r\n                                                        onChange={(e) =>\r\n                                                            dispatch(\r\n                                                                addToCart(item.seed, Number(e.target.value))\r\n                                                            )\r\n                                                        }\r\n                                                    >\r\n                                                        {[...Array(item.countInStock).keys()].map((x) => (\r\n                                                            <option key={x + 1} value={x + 1}>\r\n                                                                {x + 1}\r\n                                                            </option>\r\n                                                        ))}\r\n                                                    </Form.Control>\r\n                                                </Col>\r\n                                                <Col md={2}>\r\n                                                    <Button\r\n                                                        type='button'\r\n                                                        variant='light'\r\n                                                        onClick={() => removeFromCartHandler(item.seed)}\r\n                                                    >\r\n                                                        <i className='fas fa-trash'></i>\r\n                                                    </Button>\r\n                                                </Col>\r\n                                            </Row>\r\n                                        </ListGroup.Item>\r\n                                    ))}\r\n                                </ListGroup>\r\n                            )}\r\n                </Col>\r\n                <Col md={4}>\r\n                    <Card style={{ marginTop: '50px' }}>\r\n                        <ListGroup variant='flush'>\r\n                            <ListGroup.Item>\r\n                                <h2>Subtotal ({cartItems.reduce((acc, item) => acc + item.qty, 0)}) items</h2>\r\n                                RS.{cartItems\r\n                                    .reduce((acc, item) => acc + item.qty * item.price, 0)\r\n                                    .toFixed(2)}\r\n                            </ListGroup.Item>\r\n                            <ListGroup.Item>\r\n                                <Button\r\n                                    type='button'\r\n                                    className='btn-block'\r\n                                    disabled={cartItems.length === 0}\r\n                                    onClick={checkoutHandler}\r\n                                >\r\n                                    Proceed To Checkout\r\n                                </Button>\r\n                            </ListGroup.Item>\r\n                        </ListGroup>\r\n                    </Card>\r\n                </Col>\r\n            </Row>\r\n        </Container>\r\n    )\r\n}\r\n\r\nexport default Cart\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OAASC,IAAI,KAAQ,kBAAkB,CACvC,MAAO,CAAAC,OAAO,KAAM,oCAAoC,CACxD,OAASC,SAAS,CAAEC,cAAc,KAAQ,6BAA6B,CACvE,OAASC,GAAG,CAAEC,GAAG,CAAEC,SAAS,CAAEC,KAAK,CAAEC,MAAM,CAAEC,IAAI,CAAEC,SAAS,CAAEC,IAAI,KAAQ,iBAAiB,CAC3F,MAAO,CAAAC,IAAI,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEhD,KAAM,CAAAC,IAAI,CAAGC,IAAA,EAAkC,IAAjC,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,OAAQ,CAAC,CAAAH,IAAA,CAEtC,KAAM,CAAAI,SAAS,CAAGH,KAAK,CAACI,MAAM,CAACC,EAAE,CACjC,KAAM,CAAAC,GAAG,CAAGL,QAAQ,CAACM,MAAM,CAAGC,MAAM,CAACP,QAAQ,CAACM,MAAM,CAACE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAG,CAAC,CAEvE,KAAM,CAAAC,QAAQ,CAAG/B,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAgC,QAAQ,CAAG/B,WAAW,CAAEgC,KAAK,EAAKA,KAAK,CAACD,QAAQ,CAAC,CACvD,KAAM,CAAEE,SAAU,CAAC,CAAGF,QAAQ,CAE9BjC,SAAS,CAAC,IAAM,CACZ,GAAIyB,SAAS,CAAE,CACXO,QAAQ,CAAC3B,SAAS,CAACoB,SAAS,CAAEG,GAAG,CAAC,CAAC,CACvC,CACJ,CAAC,CAAE,CAACI,QAAQ,CAAEP,SAAS,CAAEG,GAAG,CAAC,CAAC,CAE9B,KAAM,CAAAQ,qBAAqB,CAAIT,EAAE,EAAK,CAClCK,QAAQ,CAAC1B,cAAc,CAACqB,EAAE,CAAC,CAAC,CAChC,CAAC,CAED,KAAM,CAAAU,eAAe,CAAGA,CAAA,GAAM,CAC1Bb,OAAO,CAACc,IAAI,CAAC,0BAA0B,CAAC,CAC5C,CAAC,CAED,mBACInB,KAAA,CAACN,SAAS,EAAC0B,KAAK,CAAE,CAAEC,SAAS,CAAE,OAAO,CAAEC,YAAY,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC3DzB,IAAA,CAACF,IAAI,EACD4B,KAAK,CAAC,eAAe,CACxB,CAAC,cACFxB,KAAA,CAACZ,GAAG,EAAAmC,QAAA,eACAvB,KAAA,CAACX,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,eACPzB,IAAA,OAAAyB,QAAA,CAAI,eAAa,CAAI,CAAC,CAElBP,SAAS,CAACU,MAAM,GAAK,CAAC,cAClB1B,KAAA,CAACf,OAAO,EAAC0C,OAAO,CAAC,QAAQ,CAAAJ,QAAA,EAAC,qBACH,cAAAzB,IAAA,CAACd,IAAI,EAAC4C,EAAE,CAAC,GAAG,CAAAL,QAAA,CAAC,SAAO,CAAM,CAAC,EACzC,CAAC,cAENzB,IAAA,CAACR,SAAS,EAACqC,OAAO,CAAC,OAAO,CAAAJ,QAAA,CACrBP,SAAS,CAACa,GAAG,CAAEC,IAAI,eAChBhC,IAAA,CAACR,SAAS,CAACyC,IAAI,EAAiBX,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAE,QAAA,cACzDvB,KAAA,CAACZ,GAAG,EAAAmC,QAAA,eACAzB,IAAA,CAACT,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,cACPzB,IAAA,CAACP,KAAK,EAACyC,GAAG,CAAEF,IAAI,CAACG,KAAM,CAACC,GAAG,CAAEJ,IAAI,CAACK,IAAK,CAACC,KAAK,MAACC,OAAO,MAAE,CAAC,CACvD,CAAC,cACNvC,IAAA,CAACT,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,cACPzB,IAAA,CAACd,IAAI,EAAC4C,EAAE,2BAAAU,MAAA,CAA4BR,IAAI,CAACS,IAAI,CAAG,CAAAhB,QAAA,CAAEO,IAAI,CAACK,IAAI,CAAO,CAAC,CAClE,CAAC,cACNnC,KAAA,CAACX,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,EAAC,KAAG,CAACO,IAAI,CAACU,KAAK,EAAM,CAAC,cACjC1C,IAAA,CAACT,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,cACPzB,IAAA,CAACL,IAAI,CAACgD,OAAO,EACTC,EAAE,CAAC,QAAQ,CACXC,KAAK,CAAEb,IAAI,CAACrB,GAAI,CAChBmC,QAAQ,CAAGC,CAAC,EACRhC,QAAQ,CACJ3B,SAAS,CAAC4C,IAAI,CAACS,IAAI,CAAE5B,MAAM,CAACkC,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC,CAC/C,CACH,CAAApB,QAAA,CAEA,CAAC,GAAGwB,KAAK,CAACjB,IAAI,CAACkB,YAAY,CAAC,CAACC,IAAI,CAAC,CAAC,CAAC,CAACpB,GAAG,CAAEqB,CAAC,eACxCpD,IAAA,WAAoB6C,KAAK,CAAEO,CAAC,CAAG,CAAE,CAAA3B,QAAA,CAC5B2B,CAAC,CAAG,CAAC,EADGA,CAAC,CAAG,CAET,CACX,CAAC,CACQ,CAAC,CACd,CAAC,cACNpD,IAAA,CAACT,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,cACPzB,IAAA,CAACN,MAAM,EACH2D,IAAI,CAAC,QAAQ,CACbxB,OAAO,CAAC,OAAO,CACfyB,OAAO,CAAEA,CAAA,GAAMnC,qBAAqB,CAACa,IAAI,CAACS,IAAI,CAAE,CAAAhB,QAAA,cAEhDzB,IAAA,MAAGuD,SAAS,CAAC,cAAc,CAAI,CAAC,CAC5B,CAAC,CACR,CAAC,EACL,CAAC,EAnCWvB,IAAI,CAACS,IAoCV,CACnB,CAAC,CACK,CACd,EACR,CAAC,cACNzC,IAAA,CAACT,GAAG,EAACoC,EAAE,CAAE,CAAE,CAAAF,QAAA,cACPzB,IAAA,CAACH,IAAI,EAACyB,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAO,CAAE,CAAAE,QAAA,cAC/BvB,KAAA,CAACV,SAAS,EAACqC,OAAO,CAAC,OAAO,CAAAJ,QAAA,eACtBvB,KAAA,CAACV,SAAS,CAACyC,IAAI,EAAAR,QAAA,eACXvB,KAAA,OAAAuB,QAAA,EAAI,YAAU,CAACP,SAAS,CAACsC,MAAM,CAAC,CAACC,GAAG,CAAEzB,IAAI,GAAKyB,GAAG,CAAGzB,IAAI,CAACrB,GAAG,CAAE,CAAC,CAAC,CAAC,SAAO,EAAI,CAAC,MAC3E,CAACO,SAAS,CACRsC,MAAM,CAAC,CAACC,GAAG,CAAEzB,IAAI,GAAKyB,GAAG,CAAGzB,IAAI,CAACrB,GAAG,CAAGqB,IAAI,CAACU,KAAK,CAAE,CAAC,CAAC,CACrDgB,OAAO,CAAC,CAAC,CAAC,EACH,CAAC,cACjB1D,IAAA,CAACR,SAAS,CAACyC,IAAI,EAAAR,QAAA,cACXzB,IAAA,CAACN,MAAM,EACH2D,IAAI,CAAC,QAAQ,CACbE,SAAS,CAAC,WAAW,CACrBI,QAAQ,CAAEzC,SAAS,CAACU,MAAM,GAAK,CAAE,CACjC0B,OAAO,CAAElC,eAAgB,CAAAK,QAAA,CAC5B,qBAED,CAAQ,CAAC,CACG,CAAC,EACV,CAAC,CACV,CAAC,CACN,CAAC,EACL,CAAC,EACC,CAAC,CAEpB,CAAC,CAED,cAAe,CAAAtB,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module"}