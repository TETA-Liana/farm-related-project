{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Container}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'../..//../components/Message/Message';import Loader from'../../../components/Loader/Loader';import{listUsers,deleteUsers}from'./../../../actions/userActions';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserList=_ref=>{let{history}=_ref;const dispatch=useDispatch();const userList=useSelector(state=>state.userList);const{loading,error,users}=userList;const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const userDelete=useSelector(state=>state.userDelete);const{success:successDelete}=userDelete;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,history,successDelete,userInfo]);const deleteHandler=id=>{if(window.confirm('Are you sure')){dispatch(deleteUsers(id));}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(LinkContainer,{style:{float:'right'},to:\"/register\",children:/*#__PURE__*/_jsx(Button,{className:\"mr-3 mb-3\",children:\"ADD ADMIN\"})}),/*#__PURE__*/_jsx(Container,{children:loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{style:{marginBottom:'223px'},striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"td\",{children:\"NAME\"}),/*#__PURE__*/_jsx(\"td\",{children:\"CROP SELECTION\"}),/*#__PURE__*/_jsx(\"td\",{children:\"EMAIL / NIC\"}),/*#__PURE__*/_jsx(\"td\",{children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"td\",{children:\"EDIT / DELETE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user._id}),/*#__PURE__*/_jsx(\"td\",{children:user.name}),user.cropSelection?/*#__PURE__*/_jsx(\"td\",{children:user.cropSelection}):/*#__PURE__*/_jsx(\"td\",{style:{color:'red'},children:\"No Crop Selected\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(user.email),children:user.email})}),/*#__PURE__*/_jsx(\"td\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(LinkContainer,{to:\"/admin/user/\".concat(user._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{variant:\"light\",className:\"btn btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",className:\"btn-sm mr-2\",onClick:()=>deleteHandler(user._id),children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"})})]})]},user._id))})]})})]});};export default UserList;","map":{"version":3,"names":["React","useEffect","LinkContainer","Table","Button","Container","useDispatch","useSelector","Message","Loader","listUsers","deleteUsers","jsx","_jsx","jsxs","_jsxs","UserList","_ref","history","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","success","successDelete","isAdmin","push","deleteHandler","id","window","confirm","children","style","float","to","className","variant","marginBottom","striped","bordered","hover","responsive","map","user","_id","name","cropSelection","color","href","concat","email","onClick"],"sources":["C:/Users/PC/web-cw/frontend/src/components/DashBoard/UserList/UserList.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport {\r\n    Table,\r\n    Button,\r\n    Container,\r\n} from 'react-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from '../..//../components/Message/Message'\r\nimport Loader from '../../../components/Loader/Loader'\r\nimport { listUsers, deleteUsers } from './../../../actions/userActions'\r\n\r\nconst UserList = ({ history }) => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userList = useSelector(state => state.userList)\r\n    const { loading, error, users } = userList\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const userDelete = useSelector(state => state.userDelete)\r\n    const { success: successDelete } = userDelete\r\n\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(listUsers())\r\n        } else {\r\n            history.push('/login')\r\n        }\r\n    }, [dispatch, history, successDelete, userInfo])\r\n\r\n    const deleteHandler = (id) => {\r\n        if (window.confirm('Are you sure')) {\r\n            dispatch(deleteUsers(id))\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <LinkContainer style={{ float: 'right' }} to='/register'>\r\n                <Button className=\"mr-3 mb-3\">ADD ADMIN</Button>\r\n            </LinkContainer>\r\n            <Container>\r\n                {loading ? <Loader />\r\n                    : error ? <Message variant='danger'>{error}</Message>\r\n                        : (\r\n                            <Table style={{ marginBottom: '223px' }} striped bordered hover responsive className='table-sm'>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <td>ID</td>\r\n                                        <td>NAME</td>\r\n                                        <td>CROP SELECTION</td>\r\n                                        <td>EMAIL / NIC</td>\r\n                                        <td>ADMIN</td>\r\n                                        <td>EDIT / DELETE</td>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        users.map(user => (\r\n                                            <tr key={user._id}>\r\n                                                <td>{user._id}</td>\r\n                                                <td>{user.name}</td>\r\n                                                {\r\n                                                    user.cropSelection\r\n                                                        ? <td>{user.cropSelection}</td>\r\n                                                        : <td style={{ color: 'red' }}>No Crop Selected</td>\r\n                                                }\r\n                                                <td><a href={`mailto:${user.email}`}>{user.email}</a></td>\r\n                                                <td>\r\n                                                    {\r\n                                                        user.isAdmin ? (\r\n                                                            <i className=\"fas fa-check\" style={{ color: 'green' }}></i>\r\n                                                        ) : <i className=\"fas fa-times\" style={{ color: 'red' }}></i>\r\n                                                    }\r\n                                                </td>\r\n                                                <td>\r\n                                                    <LinkContainer to={`/admin/user/${user._id}/edit`}>\r\n                                                        <Button variant=\"light\" className=\"btn btn-sm\">\r\n                                                            <i className=\"fas fa-edit\"></i>\r\n                                                        </Button>\r\n                                                    </LinkContainer>\r\n                                                    <Button\r\n                                                        variant=\"danger\"\r\n                                                        className=\"btn-sm mr-2\"\r\n                                                        onClick={() => deleteHandler(user._id)}\r\n                                                    >\r\n                                                        <i className=\"fas fa-trash-alt\"></i>\r\n                                                    </Button>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))\r\n                                    }\r\n                                </tbody>\r\n                            </Table>\r\n                        )\r\n                }\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserList\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}