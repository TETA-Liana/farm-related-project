{"ast":null,"code":"import React,{useEffect}from'react';import{Table,Container,Button}from'react-bootstrap';import{LinkContainer}from'react-router-bootstrap';import{useDispatch,useSelector}from'react-redux';import Message from'./../../../components/Message/Message';import Loader from'./../../../components/Loader/Loader';import{listOrders}from'./../../../actions/orderAction';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderListScreen=_ref=>{let{history}=_ref;const dispatch=useDispatch();const userLogin=useSelector(state=>state.userLogin);const{userInfo}=userLogin;const orderList=useSelector(state=>state.orderList);const{loading,error,orders}=orderList;useEffect(()=>{if(userInfo&&userInfo.isAdmin){dispatch(listOrders());}else{history.push('/login');}},[dispatch,history,userInfo]);return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'10px'},children:/*#__PURE__*/_jsx(Container,{children:loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{style:{marginBottom:'223px'},striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"td\",{children:\"USER\"}),/*#__PURE__*/_jsx(\"td\",{children:\"DATE\"}),/*#__PURE__*/_jsx(\"td\",{children:\"TOTAL PRICE\"}),/*#__PURE__*/_jsx(\"td\",{children:\"PAID\"}),/*#__PURE__*/_jsx(\"td\",{children:\"DELIVERED\"}),/*#__PURE__*/_jsx(\"td\",{children:\"MORE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order._id}),/*#__PURE__*/_jsx(\"td\",{children:order.user&&order.user.name}),/*#__PURE__*/_jsx(\"td\",{children:order.createdAt.substring(0,10)}),/*#__PURE__*/_jsx(\"td\",{children:order.totalPrice}),/*#__PURE__*/_jsx(\"td\",{children:order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:order.isDelivered?order.paidAt.substring(0,10):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(LinkContainer,{to:\"/order/\".concat(order._id,\"/edit\"),children:/*#__PURE__*/_jsx(Button,{varinat:\"light\",className:\"btn-sm\",children:\"Details\"})})})]},order._id))})]})})});};export default OrderListScreen;","map":{"version":3,"names":["React","useEffect","Table","Container","Button","LinkContainer","useDispatch","useSelector","Message","Loader","listOrders","jsx","_jsx","jsxs","_jsxs","OrderListScreen","_ref","history","dispatch","userLogin","state","userInfo","orderList","loading","error","orders","isAdmin","push","style","marginTop","children","variant","marginBottom","striped","bordered","hover","responsive","className","map","order","_id","user","name","createdAt","substring","totalPrice","isPaid","paidAt","color","isDelivered","to","concat","varinat"],"sources":["C:/Users/PC/web-cw/frontend/src/components/DashBoard/OrderList/OrderList.jsx"],"sourcesContent":["import React, { useEffect } from 'react'\r\nimport {\r\n    Table,\r\n    Container,\r\n    Button\r\n} from 'react-bootstrap'\r\nimport { LinkContainer } from 'react-router-bootstrap'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport Message from './../../../components/Message/Message'\r\nimport Loader from './../../../components/Loader/Loader'\r\nimport { listOrders } from './../../../actions/orderAction'\r\n\r\nconst OrderListScreen = ({ history }) => {\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const userLogin = useSelector(state => state.userLogin)\r\n    const { userInfo } = userLogin\r\n\r\n    const orderList = useSelector(state => state.orderList)\r\n    const { loading, error, orders } = orderList\r\n\r\n    useEffect(() => {\r\n        if (userInfo && userInfo.isAdmin) {\r\n            dispatch(listOrders())\r\n        } else {\r\n            history.push('/login')\r\n        }\r\n    }, [dispatch, history, userInfo])\r\n\r\n    return (\r\n        <div style={{ marginTop: '10px' }}>\r\n            <Container>\r\n                {loading ? <Loader />\r\n                    : error ? <Message variant='danger'>{error}</Message>\r\n                        : (\r\n                            <Table style={{ marginBottom: '223px' }} striped bordered hover responsive className='table-sm'>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <td>ID</td>\r\n                                        <td>USER</td>\r\n                                        <td>DATE</td>\r\n                                        <td>TOTAL PRICE</td>\r\n                                        <td>PAID</td>\r\n                                        <td>DELIVERED</td>\r\n                                        <td>MORE</td>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {\r\n                                        orders.map(order => (\r\n                                            <tr key={order._id}>\r\n                                                <td>{order._id}</td>\r\n                                                <td>{order.user && order.user.name}</td>\r\n                                                <td>{order.createdAt.substring(0, 10)}</td>\r\n                                                <td>{order.totalPrice}</td>\r\n                                                <td>\r\n                                                    {order.isPaid ? (\r\n                                                        order.paidAt.substring(0, 10)\r\n                                                    ) : (\r\n                                                            <i className='fas fa-times' style={{ color: 'red' }}></i>\r\n                                                        )\r\n                                                    }\r\n                                                </td>\r\n                                                <td>\r\n                                                    {order.isDelivered ? (\r\n                                                        order.paidAt.substring(0, 10)\r\n                                                    ) : (\r\n                                                            <i className='fas fa-times' style={{ color: 'red' }}></i>\r\n                                                        )}\r\n                                                </td>\r\n                                                <td>\r\n                                                    <LinkContainer to={`/order/${order._id}/edit`}>\r\n                                                        <Button varinat='light' className='btn-sm'>\r\n                                                            Details\r\n                                                        </Button>\r\n                                                    </LinkContainer>\r\n                                                </td>\r\n                                            </tr>\r\n                                        ))\r\n                                    }\r\n                                </tbody>\r\n                            </Table>\r\n                        )\r\n                }\r\n            </Container>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OrderListScreen\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}